<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  A List of Datasets Collecting National Migration Policies · Silvia Peracchi
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Silvia Peracchi">
<meta name="description" content="
  A collection of tips for applied research in Economics
  
    
    Link to heading
  


  Version Control
  
    
    Link to heading
  





  A couple of tips  for version control
  
    
    Link to heading
  






  Compare scripts in VSCode or Notepad&#43;&#43;
  
    
    Link to heading
  



Visual Studio Code and Notepad&#43;&#43; are text editor tools that allow you to visualize files under a great variety of formats.
They also have nice plugins that let you easily compare the contents of 2 scripts, for example 2 Stata .do files or Python .py files,
which correspond to 2 different versions of the same coding script.">
<meta name="keywords" content="economics">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="A List of Datasets Collecting National Migration Policies">
  <meta name="twitter:description" content="A collection of tips for applied research in EconomicsLink to headingVersion ControlLink to headingA couple of tips for version controlLink to headingCompare scripts in VSCode or Notepad&#43;&#43;Link to headingVisual Studio Code and Notepad&#43;&#43; are text editor tools that allow you to visualize files under a great variety of formats. They also have nice plugins that let you easily compare the contents of 2 scripts, for example 2 Stata .do files or Python .py files, which correspond to 2 different versions of the same coding script.">

<meta property="og:url" content="http://localhost:1313/posts/tips_document/">
  <meta property="og:site_name" content="Silvia Peracchi">
  <meta property="og:title" content="A List of Datasets Collecting National Migration Policies">
  <meta property="og:description" content="A collection of tips for applied research in EconomicsLink to headingVersion ControlLink to headingA couple of tips for version controlLink to headingCompare scripts in VSCode or Notepad&#43;&#43;Link to headingVisual Studio Code and Notepad&#43;&#43; are text editor tools that allow you to visualize files under a great variety of formats. They also have nice plugins that let you easily compare the contents of 2 scripts, for example 2 Stata .do files or Python .py files, which correspond to 2 different versions of the same coding script.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-12-13T10:56:35+01:00">
    <meta property="article:modified_time" content="2022-12-13T10:56:35+01:00">
    <meta property="article:tag" content="Migration">
    <meta property="article:tag" content="Data">
    <meta property="article:tag" content="Migration Policy">
    <meta property="article:tag" content="Datasets">
      <meta property="og:see_also" content="http://localhost:1313/posts/post1/">




<link rel="canonical" href="http://localhost:1313/posts/tips_document/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-dark">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Silvia Peracchi
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/research">Research</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/credits">Credits</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/tips_document/">
              A List of Datasets Collecting National Migration Policies
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2022-12-13T10:56:35&#43;01:00">
                December 13, 2022
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              11-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/migration-policy/">Migration Policy</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/migration/">Migration</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/data/">Data</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/migration-policy/">Migration Policy</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/datasets/">Datasets</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <h1 id="a-collection-of-tips-for-applied-research-in-economics">
  A collection of tips for applied research in Economics
  <a class="heading-link" href="#a-collection-of-tips-for-applied-research-in-economics">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<h2 id="version-control">
  Version Control
  <a class="heading-link" href="#version-control">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<!-- raw HTML omitted -->
<ul>
<li>
<h3 id="a-couple-of-tips--for-version-control">
  A couple of tips  for version control
  <a class="heading-link" href="#a-couple-of-tips--for-version-control">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
</li>
</ul>
<ol>
<li>
<h3 id="compare-scripts-in-vscode-or-notepad">
  <em>Compare scripts in VSCode or Notepad++</em>
  <a class="heading-link" href="#compare-scripts-in-vscode-or-notepad">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
</li>
</ol>
<p>Visual Studio Code and Notepad++ are text editor tools that allow you to visualize files under a great variety of formats.
They also have nice plugins that let you easily compare the contents of 2 scripts, for example 2 Stata .do files or Python .py files,
which correspond to 2 different versions of the same coding script.</p>
<p><strong>VSCode compare example</strong></p>
<p>Here is a Windows 10 based example: we need to quickly visualize what changed between a Stata file we had called <em>Main_estimations.do</em> and
<em>Main_estimations_V2_26_09_2024.do</em>. We can open VSCode, open the parent folder where the two files are located, see it on the left.
We then right-click  <em>Main_estimations.do</em>, click on &ldquo;Select for compare&rdquo;; right-click on <em>Main_estimations_V2_26_09_2024.do</em>, click on &ldquo;Compare with selected&rdquo;.
We&rsquo;ll see a nice and smart left-right visualization of what is unchanged and what differs in the 2 file versions.
The colors and appropriate spacing of this nice tool make the comparison easier. There are also some easy clicks in case we want to get rid of some differences.
<!-- raw HTML omitted -->   <!-- raw HTML omitted --></p>
<ol start="2">
<li>
<h3 id="using-github">
  <em>Using GitHub</em>
  <a class="heading-link" href="#using-github">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
</li>
</ol>
<ul>
<li><strong>Overview</strong>: GitHub is an ideal tool out there for version tracking, collaborating on code, and managing changes.
It is a platform that hosts our repositories online. We can choose whether to make our repositories private or public.
The broad idea is that we download the last version of the repository every time we go back to the project and upload the modified version after we modify it.
We can always have a look at the previous version later on.
GitHub facilitates collaboration through features like branches and pull requests.
Branches allow multiple users to work on different versions of a project simultaneously without interfering with the main codebase.
Pull requests are used to merge code changes from one branch to another, enabling peer review and discussion before integration.
GitHub also offers Issue Tracking, where users can report bugs or suggest enhancements, and each issue can be linked directly to specific pull requests. Additionally, GitHub Actions provide automation for continuous integration and deployment processes, enhancing efficiency in project development cycles.</li>
</ul>
<p>More guidance on GitHub can be found, for example, in these <a href="https://raw.githack.com/uo-ec607/lectures/master/02-git/02-Git.html#64"  class="external-link" target="_blank" rel="noopener">Lecture Notes</a> from the University of Oregon.</p>
<h2 id="arranging-files">
  Arranging Files
  <a class="heading-link" href="#arranging-files">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="directory-structure">
  Directory Structure
  <a class="heading-link" href="#directory-structure">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>
<p><strong>Organization</strong>: My current practice is to separate directories for scripts, data, output, and documentation.
For projects not uploaded to GitHub, I add a &ldquo;scripts&gt; Old&rdquo; folder where to store to codes and data to make sure I don&rsquo;t lose an older version of the file.
However, I have been trying to avoid having any useless file in the scripts folders.
<!-- raw HTML omitted -->   <!-- raw HTML omitted --></p>
</li>
<li>
<p>I have recently started calling scripts by prefixing them with a number.
The number corresponds with the order in which I have to run the scripts.
The ideal practice here would be to create a main script from which you run all the numbered scripts in the good order.
This sounds to me as a great approach for replicability (we should not forget to run all files from start to end to make sure that all modifications are accounted for in our last outputs).
However, number prefixes alone are already a nice and simple approach to ensure intuitive folder layout.</p>
</li>
</ul>
<p><!-- raw HTML omitted -->   <!-- raw HTML omitted --></p>
<ul>
<li>
<p>I also tend to save my output in .tex format for tables and .png format for graphs.
I store them separately under a subfolder for Tables and one for Graphs, in Texdocs.</p>
</li>
<li>
<p><strong>Temporary Folders</strong>: I like to save my cleaned data outputs under a temp folder.
The rationale of my temp folders is: files there can be recreated by relaunching some scripts.
As data can occupy memory, in case I need to free up some space in the directory, I can always drop my temp folder&rsquo;s contents.</p>
</li>
</ul>
<h2 id="automation">
  Automation
  <a class="heading-link" href="#automation">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="general-tips-when-exporting-output">
  General tips when exporting output
  <a class="heading-link" href="#general-tips-when-exporting-output">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li><strong>Stata esttab or outreg2</strong>: We often use these tools to extract <code>.tex</code> tables directly from Stata.
Beyond regression output, you can go far and create many types of tables.
You can avoid formatting too much in Stata if you need to combine tables flexibly.
The goal here is to avoid repeating tedious tasks manually and limit the risks of forgetting what you had done manually months after doing it.
Here is an example of a list of municipalities I created for a project I worked on in my PhD.</li>
</ul>
<!-- raw HTML omitted -->
<pre><code>global index 1
foreach lname in &quot;^A&quot; &quot;^B[a-e]&quot; &quot;^B[f-z]&quot;  &quot;^Ca[b-r]&quot; &quot;^Ca[s-z]&quot; ///
  &quot;^C[b-e]&quot; &quot;^C[f-z]&quot; &quot;^[D-F]&quot;  &quot;^[G-L]&quot; &quot;^[M-N]&quot;  &quot;^O&quot; &quot;^P[a-n]&quot; ///
  &quot;^P[o-z]|^R&quot; &quot;^Sa&quot; &quot;^S[b-z]&quot; &quot;^T|^Va&quot; &quot;^V[b-z]|^Z&quot; {
levelsof location if post==0 &amp; regexm(location, &quot;`lname'&quot; ), local(MUNIC$index ) clean separate(&quot;; &quot;)
global index = $index +1
}

global STATS &quot;&quot;
local Empty &quot;.&quot;

qui eststo tab_location: estpost tabulate location  in 1
forvalues x = 1(1)$index {
estadd local M`x' `MUNIC`x'': tab_location
global STATS $STATS M`x'
local Empty `Empty' &quot; &quot; 
}
di &quot;`STATS'&quot;
esttab tab_location , drop(*) stats($STATS, labels(&quot;Municipalities:&quot; `Empty' ))  alignment(r) ///
replace unstack noobs  nonumber nomtitle nogaps compress cells(&quot;b(fmt(g))&quot;) collabels(none) ///
addnotes(&quot;List of Municipalities in the Panel&quot;)

esttab tab_location using &quot;$dir_tables/Summary_municipalities.tex&quot; , drop(*)  ///
stats($STATS , labels(&quot;\textbf{Municipalities:}&quot;
</code></pre>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<ul>
<li>
<p><strong>Overleaf</strong> If you use Overleaf and Dropbox, check out the integration option of Overleaf pro version (if you have access to it).
This allows you to avoid the tedious step of manually inserting auxiliary files (graphs/tables) into Overleaf.
This functionality will create a Dropbox folder called Applications&gt;Overleaf, where you can see all your Overleaf projects.
You can use those folders when automatically storying the output from your analysis.</p>
</li>
<li>
<p><strong>Adaptive Paths</strong>: Set up Stata or R scripts to adapt to the user’s environment, simplifying code execution across different machines.</p>
<ul>
<li>Example 1: Stata <code>cd</code></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd &#34;C:/Users/speracchi/Dropbox/NEWS_LIGURIA&#34; 
</span></span></code></pre></div><p>can also be written as:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd &#34;C:/Users/`c(username)&#39;/Dropbox/NEWS_LIGURIA&#34;
</span></span></code></pre></div></li>
</ul>
<p>And more generally we can write an if statement to ask Stata to use different cds, depending on the username, which we can access as <code>&quot;c(username)&quot;</code> in the sofware.</p>
<ul>
<li>Example 2: R  <code>setwd</code> and <code>rm(list=ls())</code> vs relaunching the R session</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">rm</span><span class="p">(</span><span class="n">list</span><span class="o">=</span><span class="nf">ls</span><span class="p">())</span> 
</span></span><span class="line"><span class="cl"><span class="nf">setwd</span><span class="p">(</span><span class="s">&#34;C:/Users/speracchi/Dropbox/NEWS_LIGURIA&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>Moving from Stata to R, my intuition led me to discover and repeatedly use the command combo above:
the first line clears the environment variables, the second line sets up the directory.
Ammittedly, I wrote many codes like this, preceded by some lines where I uploaded libraries.
However, this turns out to be not the best approach.</p>
<ul>
<li>Restarting the R session (Session &gt; Restart R in RStudio) is a cleaner and safer way to ensure that the environment is completely clear of any previous objects,
settings, or loaded packages, reducing the risk of hidden dependencies or side effects from earlier code.</li>
<li>Best Practices:
<ul>
<li>Script Independence: Scripts should ideally be independent and executable on their own, without requiring prior commands like changing directories or clearing the workspace.</li>
<li>Explicit Code: Relaunching the session before running a script ensures that all required packages are loaded explicitly (and all necessary data is loaded afresh) which helps in identifying missing dependencies.</li>
</ul>
</li>
</ul>
<h3 id="speeding-up-code-some-specific-tips">
  Speeding up code: some specific tips
  <a class="heading-link" href="#speeding-up-code-some-specific-tips">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>Functions vs loops. Though this can depend on the situation, functions are in many cases faster options than loops to run a task repeatedly.
In R we can use <code>lapply</code>, <code>sapply</code>, to apply the same function to a set of objects.</li>
</ul>
<p>In STATA, we can also create &ldquo;functions&rdquo;, which are called &ldquo;programs&rdquo;. They can be stored as .ado files but can also be written on a .do file.
-Example: recalibrate_constants.ado. I Stata, you can use the package &ldquo;parallel&rdquo;</p>
<p>In python, we can create functions inline or in separate files and import them as we import packages.</p>
<ul>
<li>Some parallel computing packages:
<ul>
<li>R: <code>furr</code>, <code>future</code></li>
<li>Python: <code>joblib</code></li>
<li>Stata: <code>parallel</code></li>
</ul>
</li>
</ul>
<h2 id="interacting-with-shell-commands">
  Interacting with Shell Commands
  <a class="heading-link" href="#interacting-with-shell-commands">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="using-shell-commands-in-scripts-i-focus-on-window-10">
  Using Shell Commands in Scripts (I focus on Window 10)
  <a class="heading-link" href="#using-shell-commands-in-scripts-i-focus-on-window-10">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>
<p><strong>Stata</strong>: In Stata, we can incorporate a <code>shell</code> commands easily, to execute system-level tasks directly. This can be done by writing a <code>!</code> on the left of the shell command.
<a href="https://www.stata.com/manuals13/dshell.pdf"  class="external-link" target="_blank" rel="noopener">More info from Stata Manual</a></p>
<ul>
<li><strong><code>cd</code></strong> — Change directory</li>
<li><strong><code>copy</code></strong> — Copy file from disk or URL</li>
<li><strong><code>dir</code></strong> — Display filenames</li>
<li><strong><code>erase</code></strong> — Erase a disk file</li>
<li><strong><code>mkdir</code></strong> — Create directory</li>
<li><strong><code>rmdir</code></strong> — Remove directory</li>
<li><strong><code>type</code></strong> — Display contents of a file</li>
</ul>
<p>For example, <code>dir</code> is a quick way to list all files in the current directory. We can also save a local with such a list, which we could combine it with a loop if needed.</p>
</li>
<li>
<p><strong>R</strong>: The same functionalities exist in R. For example, Use <code>system()</code> or <code>system2()</code> in R to call external programs and scripts.
You also create a list of file names from a specific folder by simply using <code>list.files()</code>.</p>
</li>
<li>
<p><strong>Python</strong>: Python’s <code>os</code> allows us to interact with the operating system.
With this library we can, for instance, check if files exist (os.path.exists()), list the files contained in specific folders (os.listdir()), set the current directory (os.chrdir()).
<code>shutil</code> library provides a suite of functions for file and directory operations. It is especially useful for copying, moving, and removing files and directories, as well as for managing archives.
In the code snippet below, I copied graphs and tables from my local machine to the Overleaf folder in Dropbox:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">shutil</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Load the .tex file</span>
</span></span><span class="line"><span class="cl"><span class="n">file_path</span> <span class="o">=</span> <span class="s2">&#34;C:/Users/speracchi/Dropbox/NEWS_LIGURIA/Texdocs/&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">texfile</span> <span class="o">=</span> <span class="s2">&#34;Draft_RR1_JUE_Nov2024.tex&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">graphs_dest_dir</span><span class="o">=</span><span class="s2">&#34;../../Applicazioni/Overleaf/News_Liguria/Graphs&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">tables_dest_dir</span><span class="o">=</span><span class="s2">&#34;../../Applicazioni/Overleaf/News_Liguria/Tables&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&#34;../../Applicazioni&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#Read Tex file:</span>
</span></span><span class="line"><span class="cl"><span class="n">tex_content</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">texfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Use regular expressions to find all the \includegraphics commands and capture the file paths</span>
</span></span><span class="line"><span class="cl"><span class="n">graphics_matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">includegraphics\[[^\]]*\]\{([^\}]*)\}&#39;</span><span class="p">,</span> <span class="n">tex_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">tex_files_matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">(?:input)\{([^\}]*)\}&#39;</span><span class="p">,</span> <span class="n">tex_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Have a look at the file paths</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">mm</span> <span class="k">for</span> <span class="n">mm</span> <span class="ow">in</span> <span class="n">graphics_matches</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">mm</span> <span class="k">for</span> <span class="n">mm</span> <span class="ow">in</span> <span class="n">tex_files_matches</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Copy each figure to the destination folder</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">graphic</span> <span class="ow">in</span> <span class="n">graphics_matches</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">graphic</span><span class="o">=</span><span class="n">graphic</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#34;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># If the file exists, copy it to the destination folder, but handle extentions png, jpeg, none...</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">graphic</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">graphic</span><span class="p">,</span> <span class="n">graphs_dest_dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">graphic</span><span class="o">+</span><span class="s2">&#34;.png&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">graphic</span><span class="o">+</span><span class="s2">&#34;.png&#34;</span><span class="p">,</span> <span class="n">graphs_dest_dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">graphic</span><span class="o">+</span><span class="s2">&#34;.jpeg&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">graphic</span><span class="o">+</span><span class="s2">&#34;.jpeg&#34;</span><span class="p">,</span> <span class="n">graphs_dest_dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">graphic</span><span class="o">+</span><span class="s2">&#34;.jpg&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">graphic</span><span class="o">+</span><span class="s2">&#34;.jpg&#34;</span><span class="p">,</span> <span class="n">graphs_dest_dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;File not found: </span><span class="si">{</span><span class="n">graphic</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#Repeat for tables:</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">tab</span> <span class="ow">in</span> <span class="n">tex_files_matches</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">tab</span><span class="o">=</span><span class="n">tab</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#34;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># If the file exists, copy it to the destination folder, but handle extentions png, jpeg, none...</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tab</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">tables_dest_dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;File not found: </span><span class="si">{</span><span class="n">tab</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="other-general-software-tips">
  Other General Software Tips
  <a class="heading-link" href="#other-general-software-tips">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="reusing-regression-outputs">
  Reusing Regression Outputs
  <a class="heading-link" href="#reusing-regression-outputs">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li><strong>Storage</strong>: Besides storing output tables, it can be convenient in some occasions to store the model&rsquo;s results for later use.
One straightforward example is the storage of a trained model for out of sample predictions into some test data.
As training ML-like models can take several hours, we may want to store the training model&rsquo;s output,
perhaps even being able to switch off our computer, then work on the model results the next day.
We actually can simply save the model outputs:
<ul>
<li>R: we can save the model object as an RDS by using <code>saveRDS()</code>.</li>
<li>Python: we can save &ldquo;pickle&rdquo; files containing the model object.</li>
<li>Stata: we can use <code>estimates save</code> and <code>estimates use</code> for similar purposes.
Additionally, we can have a look at the matrices that the regression output gives us by typing <code>ereturn list</code>.
This&rsquo;ll give us access to, for instance, the list of coefficients and the variance-covariance matrices (and many other objects).
We can save all matrices as data quite easily by tranforming them into data and viceversa with commands <code>svmat</code> and <code>mkmat</code>.
If we have to use matrices in Stata, it may be more convenient to use <code>mata</code> instead, which is a companion language specializing in handling matrices.</li>
</ul>
</li>
</ul>
<h3 id="code-aesthetics">
  Code Aesthetics
  <a class="heading-link" href="#code-aesthetics">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Economists are not computer scientists.
Yet, we can face complicated coding routines that require a good organization of our code, both within and across scripts.
There actually exist <a href="https://en.wikipedia.org/wiki/Coding_conventions"  class="external-link" target="_blank" rel="noopener">CODING CONVENTIONS</a> that developers stick with to maintain the material they write understandable.
The idea is that in principle, our code should be easily run, edited, or extended by everyone else in our field.
I am admittedly not at all expert about the coding conventions of the software I have been using, as I was too naive to know about their existence once I started using it.
But I&rsquo;d like to improve.</p>
<p>General recommendations might involve keeping the codes clean and not too long, using functions if needed to repeat a task many times
(functions can be faster than loops and can help shortening the code), keeping a uniform style to name variables across files (and possibly across projects).</p>
<p>Some specific tips:</p>
<ul>
<li><strong>Readability short-cuts in R</strong>: <code>Ctrl+Shift+A</code>:  imposes good alignment to your R-Script. <code>Ctrl+Shift+C</code> comments or uncomments the selected section.</li>
<li><strong>Indenting</strong> <code>Tab</code> or <code>Shift+Tab</code> allows you to add indenting to the selected snipped in many environments.</li>
</ul>
<h4 id="example-of-r-code-with-better-alignment">
  Example of R code with better alignment:
  <a class="heading-link" href="#example-of-r-code-with-better-alignment">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<!-- raw HTML omitted -->
<h1 id="heading">
  
  <a class="heading-link" href="#heading">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>prio_geo=st_as_sf(prio_st, coords = c(&ldquo;xcoord&rdquo;, &ldquo;ycoord&rdquo;),crs=st_crs(&ldquo;EPSG:4326&rdquo;))
rm(prio_yr, prio_st)
#&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-
#need country names to match within their borders. Using cshapes package
countries = cshp(date = as.Date(&ldquo;2014-12-31&rdquo;), useGW = TRUE)
#countries1 = cshp(date = NA, useGW = TRUE)
#countries1= countries1[which(countries1$gwcode%in%c(403, 600, 615, 620, 625)),]
#unique(countries1$country_name)</p>
<p>countries$reg &lt;- countrycode::countrycode(countries$country_name,origin =
&ldquo;country.name&rdquo;,destination =&ldquo;un.regionsub.name&rdquo;, warn = TRUE)
countries$gwn &lt;- countrycode::countrycode(countries$country_name,origin =
&ldquo;country.name&rdquo;,destination = &ldquo;gwn&rdquo;, warn = TRUE)</p>
<p>countries=st_make_valid(na.omit(countries[countries$reg == &ldquo;Sub-Saharan Africa&rdquo;,]))
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<pre><code>  #
  prio_geo = st_as_sf(prio_st,
                      coords = c(&quot;xcoord&quot;, &quot;ycoord&quot;),
                      crs = st_crs(&quot;EPSG:4326&quot;))
  rm(prio_yr, prio_st)
  #----------------------------------------
  #need country names to match within their borders. Using cshapes package
  countries = cshp(date = as.Date(&quot;2014-12-31&quot;), useGW = TRUE)
  #countries1 = cshp(date = NA, useGW = TRUE)
  #countries1= countries1[which(countries1$gwcode%in%c(403, 600, 615, 620, 625)),]
  #unique(countries1$country_name)

  countries$reg &lt;-
    countrycode::countrycode(
      countries$country_name,
      origin =
        &quot;country.name&quot;,
      destination = &quot;un.regionsub.name&quot;,
      warn = TRUE
    )
  countries$gwn &lt;-
    countrycode::countrycode(
      countries$country_name,
      origin =
        &quot;country.name&quot;,
      destination = &quot;gwn&quot;,
      warn = TRUE
    )

  countries = st_make_valid(na.omit(countries[countries$reg == &quot;Sub-Saharan Africa&quot;, ]))
</code></pre>
<!-- raw HTML omitted -->
<h3 id="cheatsheets">
  Cheatsheets
  <a class="heading-link" href="#cheatsheets">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>Cheatsheets are files that group the functionalities of a package (or even software) in an appealing layout that facilitates a quick consultation.
As an example, I used R&rsquo;s <code>stringr</code> package quite often in the past,
and found it easier to check how to write down the correct regular expressions by consulting the cheatsheet available <a href="https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_strings.pdf"  class="external-link" target="_blank" rel="noopener">Here.</a></li>
</ul>

      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
  
</section>


        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "silviaperacchi" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2024
     Silvia Peracchi 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  <script data-goatcounter="https://peracchisilviapersonalwebsite1234567.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>


  

  

  

  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=gid"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'gid');
</script>


  

  

  

  

  

  

  
</body>

</html>
